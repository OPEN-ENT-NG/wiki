<!DOCTYPE html>
<html>
<head>
	<title>Wiki</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="{{#infra}}js/loader.js{{/infra}}" type="text/javascript"
		id="context"></script>
	<script src="/wiki/public/js/model.js" type="text/javascript"></script>
	<script src="/wiki/public/js/controller.js" type="text/javascript"></script>
	<script type="text/ng-template" id="empty"></script>
</head>
<body>
	<portal>

<!-- TODO : créer les libellés dans les fichiers i18n -->

	<section ng-controller="WikiController">
		<!-- TODO : <button ng-click="newWiki()">Créer un wiki</button> -->
		<div>
			<h1>Nouveau wiki</h1>
			<input type="text" ng-model="titleOfNewWiki" />
			<button ng-click="saveContent()">Sauvegarder</button>
			<rich-text-editor ng-model="contentOfNewWiki" />
		</div>
		
		<div ng-show="divToShow == 'wiki_list'">
			<h1>Liste des wikis</h1>
			<div ng-repeat="wiki in wikis.all">
				<a ng-click="openSelectedWiki(wiki)">[[wiki.title]]</a>
				<button ng-click="deleteWiki(wiki)">Supprimer le wiki</button>			
			</div>
		</div>

		<!-- ng-show doesn't work with ng-include in Angular 1.2.0rc2 :  https://github.com/angular/angular.js/issues/3981 -->
		<div ng-show="divToShow == 'selected_wiki_content'">
			<div class="row" ng-include="template.containers.main" ng-model="selectedWiki"></div>
		</div>
	</section>

	</portal>
</body>
</html>